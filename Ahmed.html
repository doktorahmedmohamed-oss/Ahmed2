<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Ø£Ø±Ø´ÙØ© Ù…ÙƒØªØ¨ Ù…Ø­Ø§Ø³Ø¨Ø©</title>

<style>
body{
    font-family: Arial;
    direction: rtl;
    margin: 20px;
}
.section{
    border:1px solid #ccc;
    padding:15px;
    margin-bottom:20px;
}
input, select, button{
    padding:8px;
    margin:6px 0;
    width:100%;
    box-sizing:border-box;
}
button{
    cursor:pointer;
    border:none;
    font-size:16px;
}
button.save{background:#6c757d;color:#fff;}
button.add{background:#007bff;color:#fff;}
button.delete{background:#dc3545;color:#fff;}
button.edit{background:#28a745;color:#fff;}
table{
    width:100%;
    border-collapse:collapse;
    margin-top:15px;
}
th, td{
    border:1px solid #000;
    padding:6px;
    text-align:center;
}
th{background:#f2f2f2;}
.actions button{
    width:auto;
    margin:2px;
    font-size:14px;
}
</style>
</head>

<body>

<h2>ğŸ“ Ø£Ø±Ø´ÙØ© Ù…Ù„ÙØ§Øª Ù…ÙƒØªØ¨ Ù…Ø­Ø§Ø³Ø¨Ø©</h2>

<form class="section" id="clientForm">
<h3>â• Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù…ÙˆÙ„</h3>

<input id="serial" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù…Ø³Ù„Ø³Ù„">
<input id="clientName" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù…ÙˆÙ„">
<input id="activity" placeholder="Ø·Ø¨ÙŠØ¹Ø© Ø§Ù„Ù†Ø´Ø§Ø·">
<input id="username" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…">
<input id="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">

<select id="declaration">
    <option value="">Ù‚Ø¯Ù… Ø§Ù„Ø¥Ù‚Ø±Ø§Ø±ØŸ</option>
    <option value="Ù†Ø¹Ù…">Ù†Ø¹Ù…</option>
    <option value="Ù„Ø§">Ù„Ø§</option>
</select>

<input id="subscription" placeholder="Ù‚ÙŠÙ…Ø© Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ" type="number">
<input id="fees" placeholder="Ø§Ù„Ø£ØªØ¹Ø§Ø¨" type="number">
<input id="total" placeholder="Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ" readonly>
<input id="cash" placeholder="Ù†Ù‚Ø¯ÙŠ" type="number">
<input id="visa" placeholder="ÙÙŠØ²Ø§" type="number">

<button type="button" class="save" onclick="saveOnly()">Ø­ÙØ¸</button>
<button type="button" class="add" onclick="addClient()">â• Ø¥Ø¶Ø§ÙØ© Ù…Ù…ÙˆÙ„</button>
</form>

<div class="section">
<input id="searchInput" placeholder="ğŸ” Ø¨Ø­Ø« Ø¨Ø§Ù„Ø±Ù‚Ù… Ø£Ùˆ Ø§Ù„Ø§Ø³Ù… Ø£Ùˆ Ø§Ù„Ù†Ø´Ø§Ø·">
</div>

<table>
<thead>
<tr>
<th>Ø±Ù‚Ù…</th>
<th>Ø§Ø³Ù…</th>
<th>Ø§Ù„Ù†Ø´Ø§Ø·</th>
<th>Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</th>
<th>ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</th>
<th>Ø§Ù„Ø¥Ù‚Ø±Ø§Ø±</th>
<th>Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ</th>
<th>Ø§Ù„Ø£ØªØ¹Ø§Ø¨</th>
<th>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</th>
<th>Ù†Ù‚Ø¯ÙŠ</th>
<th>ÙÙŠØ²Ø§</th>
<th>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
</tr>
</thead>
<tbody id="tableBody"></tbody>
</table>

<script>
let clients = JSON.parse(localStorage.getItem("clients")) || [];
let editIndex = null;

/* Ø¹Ù†Ø§ØµØ± */
const serial = document.getElementById("serial");
const clientName = document.getElementById("clientName");
const activity = document.getElementById("activity");
const username = document.getElementById("username");
const password = document.getElementById("password");
const declaration = document.getElementById("declaration");
const subscription = document.getElementById("subscription");
const fees = document.getElementById("fees");
const total = document.getElementById("total");
const cash = document.getElementById("cash");
const visa = document.getElementById("visa");
const tableBody = document.getElementById("tableBody");
const searchInput = document.getElementById("searchInput");

/* Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ */
function calculateTotal(){
    total.value = (Number(subscription.value)||0) + (Number(fees.value)||0);
}
subscription.oninput = calculateTotal;
fees.oninput = calculateTotal;

/* Ø­ÙØ¸ ÙÙ‚Ø· */
function saveOnly(){
    alert("ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø¤Ù‚ØªÙ‹Ø§ØŒ Ø§Ø¶ØºØ· (Ø¥Ø¶Ø§ÙØ© Ù…Ù…ÙˆÙ„) Ù„Ø¥Ø¶Ø§ÙØªÙ‡ Ù„Ù„Ø¬Ø¯ÙˆÙ„");
}

/* Ø¥Ø¶Ø§ÙØ© Ù…Ù…ÙˆÙ„ */
function addClient(){
    const client = {
        serial: serial.value,
        name: clientName.value,
        activity: activity.value,
        username: username.value,
        password: password.value,
        declaration: declaration.value,
        subscription: subscription.value,
        fees: fees.value,
        total: total.value,
        cash: cash.value,
        visa: visa.value
    };

    if(client.serial === "" || client.name === ""){
        alert("Ø±Ù‚Ù… Ø§Ù„Ù…Ø³Ù„Ø³Ù„ ÙˆØ§Ø³Ù… Ø§Ù„Ù…Ù…ÙˆÙ„ Ù…Ø·Ù„ÙˆØ¨ÙŠÙ†");
        return;
    }

    if(editIndex === null){
        clients.push(client);
    }else{
        clients[editIndex] = client;
        editIndex = null;
    }

    localStorage.setItem("clients", JSON.stringify(clients));
    document.getElementById("clientForm").reset();
    renderTable();
}

/* Ø­Ø°Ù */
function deleteClient(i){
    if(confirm("ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø°ÙØŸ")){
        clients.splice(i,1);
        localStorage.setItem("clients", JSON.stringify(clients));
        renderTable();
    }
}

/* ØªØ¹Ø¯ÙŠÙ„ */
function editClient(i){
    const c = clients[i];
    serial.value = c.serial;
    clientName.value = c.name;
    activity.value = c.activity;
    username.value = c.username;
    password.value = c.password;
    declaration.value = c.declaration;
    subscription.value = c.subscription;
    fees.value = c.fees;
    total.value = c.total;
    cash.value = c.cash;
    visa.value = c.visa;
    editIndex = i;
}

/* Ø¹Ø±Ø¶ + Ø¨Ø­Ø« */
searchInput.onkeyup = renderTable;

function renderTable(){
    tableBody.innerHTML = "";
    const s = searchInput.value.toLowerCase();

    clients.forEach((c,i)=>{
        if(`${c.serial} ${c.name} ${c.activity}`.toLowerCase().includes(s)){
            tableBody.innerHTML += `
            <tr>
                <td>${c.serial}</td>
                <td>${c.name}</td>
                <td>${c.activity}</td>
                <td>${c.username}</td>
                <td>${c.password}</td>
                <td>${c.declaration}</td>
                <td>${c.subscription}</td>
                <td>${c.fees}</td>
                <td>${c.total}</td>
                <td>${c.cash}</td>
                <td>${c.visa}</td>
                <td class="actions">
                    <button class="edit" onclick="editClient(${i})">ØªØ¹Ø¯ÙŠÙ„</button>
                    <button class="delete" onclick="deleteClient(${i})">Ø­Ø°Ù</button>
                </td>
            </tr>`;
        }
    });
}

renderTable();
</script>

</body>
</html>